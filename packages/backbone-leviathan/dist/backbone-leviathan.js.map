{"version":3,"file":"backbone-leviathan.js","sources":["../lib/core/core.js","../lib/store/store.js","../lib/dom/dom.js","../lib/backbone-leviathan.js"],"sourcesContent":["/**\r\n * BackboneLeviathan Core\r\n * @author Patricio Ferreira <3dimentionar@gmail.com>\r\n */\r\nimport _ from 'underscore';\r\n\r\n/**\r\n * @template T\r\n * @typedef {leviathan.Maybe<T>} Maybe\r\n */\r\n\r\n/**\r\n * @interface {leviathan.Core}\r\n */\r\nexport const Core = {\r\n\t/**\r\n\t * @type {leviathan.LeviathanFactoryElement[]}\r\n\t */\r\n\t_factory: [],\r\n\r\n\t/**\r\n\t * Decorator used to register artifact with instance name.\r\n\t * This decorator will make an artifact to register itself for later retrieval.\r\n\t *\r\n\t * @example\r\n\t *  <caption>Example Registering a Leviathan View</caption>\r\n\t * \t<pre>\r\n\t * \t    @Leviathan.register({ store: SomeStore })\r\n\t * \t    class MyView extends Leviathan.View { ... }\r\n\t * \t</pre>\r\n\t * \tor\r\n\t * \t<caption>Example Registering a Leviathan Store</caption>\r\n\t * \t<pre>\r\n\t * \t    @Leviathan.register()\r\n\t * \t    class MyStore extends Leviathan.Store { ... }\r\n\t * \t</pre>\r\n\t * @param {leviathan.LeviathanElementCtor} ctor\r\n\t * @returns {leviathan.LeviathanElementCtor}\r\n\t */\r\n\tregister(ctor) {\r\n\t\t// TODO\r\n\t\treturn ctor;\r\n\t},\r\n\r\n\t/**\r\n\t * Retrieve registered artifact by a given name\r\n\t * @param {string} [name]\r\n\t * @returns {Maybe<leviathan.LeviathanElements>}\r\n\t */\r\n\tget: (name) => {\r\n\t\tconst found = !_.isNull(name) ? Core._factory.find(\r\n\t\t\t(factoryElement) => {\r\n\t\t\treturn factoryElement.name === name;\r\n\t\t}) : null;\r\n\t\treturn found ? found.instance : null;\r\n\t}\r\n};\r\n","/**\r\n * Backbone Leviathan Store\r\n * @author Patricio Ferreira <3dimentionar@gmail.com>\r\n */\r\nimport _ from 'underscore';\r\n\r\n/**\r\n * @template T\r\n * @typedef {leviathan.Maybe<T>} Maybe\r\n */\r\n\r\n/**\r\n * @typedef {leviathan.State<{}>} State\r\n * @typedef {leviathan.Store<State>} Store\r\n * @typedef {leviathan.StoreAction} StoreAction\r\n */\r\n\r\n/**\r\n * @class {leviathan.StoreCtor}\r\n */\r\nexport const Store = class {\r\n\t/**\r\n\t * @readonly\r\n\t * @type {Maybe<State>}\r\n\t */\r\n\tstate = null;\r\n\r\n\t/**\r\n\t * @constructor\r\n\t * @param {Maybe<State>} initial\r\n\t */\r\n\tconstructor(initial) {\r\n\t\tObject.assign(this, { state: initial || null });\r\n\t}\r\n\r\n\t/**\r\n\t * Dispatches an action with a given name and optionally passing parameters.\r\n\t * @this {Store}\r\n\t * @param {StoreAction} name\r\n\t * @param {any[]} params\r\n\t * @returns {Store}\r\n\t */\r\n\tdispatch(name, ...params) {\r\n\t\tif (this[name] && _.isFunction(this[name])) {\r\n\t\t\t// @ts-ignore\r\n\t\t\tthis[name](...params);\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n}\r\n","/**\r\n * Backbone BackboneLeviathan DOM\r\n * @author Patricio Ferreira <3dimentionar@gmail.com>\r\n */\r\n\r\n/**\r\n * @template T\r\n * @typedef {leviathan.Maybe<T>} Maybe\r\n */\r\n\r\n/**\r\n * @typedef {leviathan.Props<{}>} Props\r\n * @typedef {leviathan.State<{}>} State\r\n * @typedef {leviathan.Store<State>} Store\r\n * @typedef {leviathan.View<Props, Store>} View\r\n */\r\n\r\n/**\r\n * @interface {leviathan.DOM}\r\n */\r\nexport const DOM = {\r\n\t/**\r\n\t * Factory for instantiating JSX.LeviathanElement\r\n\t * @param {JSX.LeviathanElementSignature} name\r\n\t * @param {Maybe<any>} props\r\n\t * @param {Maybe<View>} children\r\n\t * @returns {Maybe<View>}\r\n\t */\r\n\tcreate: (name, props, children) => {\r\n\t\t// TODO\r\n\t\treturn null;\r\n\t},\r\n\r\n\t/**\r\n\t * DOM Server Render\r\n\t * @param {HTMLElement} dom\r\n\t * @param {JSX.LeviathanElementSignature} element;\r\n\t * @returns {string}\r\n\t */\r\n\trender: (dom, element) => {\r\n\t\t// TODO: Render initial state\r\n\t\t// Leviathan.Core.render(document.getElementById('root'), <[Leviathan.View|JSX.Element] />);\r\n\t\treturn '';\r\n\t}\r\n};\r\n\r\n/**\r\n * @class {leviathan.ViewCtor}\r\n */\r\nexport const View = class {\r\n\t/**\r\n\t * @readonly\r\n\t * @type {Props}\r\n\t */\r\n\tprops = {};\r\n\r\n\t/**\r\n\t * @readonly\r\n\t * @type {Store}\r\n\t */\r\n\tstore = null;\r\n\r\n\t/**\r\n\t * @returns {Maybe<JSX.LeviathanElement>}\r\n\t */\r\n\trender() {\r\n\t\treturn null;\r\n\t}\r\n}\r\n","/**\n * Backbone Leviathan\n * @author Patricio Ferreira <3dimentionar@gmail.com>\n *\n * @description\n * \tLeviathan is an experimental expansion that augments Backbone's capabilities.\n */\nimport Backbone from 'backbone';\nimport { Core } from './core/core';\nimport { Store } from './store/store';\nimport { DOM, View } from './dom/dom';\n\n/**\n * @type {leviathan.Leviathan}\n */\nexport const Leviathan = {\n\tNAME: process.env.npm_package_name,\n\tVERSION: process.env.npm_package_version,\n\tCore,\n\tStore,\n\tView,\n\tDOM\n};\n\nexport default Object.assign(Backbone, { Leviathan });\n"],"names":["Core","_factory","register","ctor","get","name","found","_","isNull","find","factoryElement","instance","Store","initial","Object","assign","state","isFunction","params","DOM","create","props","children","render","dom","element","View","Leviathan","NAME","VERSION","Backbone"],"mappings":";;;;;;;;;CAAA;;;;CAMA;;;;;CAKA;;;;CAGO,IAAMA,IAAI,GAAG;CACnB;;;CAGAC,EAAAA,QAAQ,EAAE,EAJS;;CAMnB;;;;;;;;;;;;;;;;;;;CAmBAC,EAAAA,QAzBmB,oBAyBVC,IAzBU,EAyBJ;CACd;CACA,WAAOA,IAAP;CACA,GA5BkB;;CA8BnB;;;;;CAKAC,EAAAA,GAAG,EAAE,aAACC,IAAD,EAAU;CACd,QAAMC,KAAK,GAAG,CAACC,CAAC,CAACC,MAAF,CAASH,IAAT,CAAD,GAAkBL,IAAI,CAACC,QAAL,CAAcQ,IAAd,CAC/B,UAACC,cAAD,EAAoB;CACpB,aAAOA,cAAc,CAACL,IAAf,KAAwBA,IAA/B;CACA,KAH+B,CAAlB,GAGT,IAHL;CAIA,WAAOC,KAAK,GAAGA,KAAK,CAACK,QAAT,GAAoB,IAAhC;CACA;CAzCkB,CAAb;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CCRP;;;;;CAKA;;;;;;CAMA;;;;CAGO,IAAMC,KAAK;CACjB;;;;;CAMA;;;;CAIA,iBAAYC,OAAZ,EAAqB;CAAA;;CAAA,mCANb,IAMa;;CACpBC,IAAAA,MAAM,CAACC,MAAP,CAAc,IAAd,EAAoB;CAAEC,MAAAA,KAAK,EAAEH,OAAO,IAAI;CAApB,KAApB;CACA;CAED;;;;;;;;;CAfiB;CAAA;CAAA,6BAsBRR,IAtBQ,EAsBS;CACzB,UAAI,KAAKA,IAAL,KAAcE,CAAC,CAACU,UAAF,CAAa,KAAKZ,IAAL,CAAb,CAAlB,EAA4C;CAAA,0CAD3Ba,MAC2B;CAD3BA,UAAAA,MAC2B;CAAA;;CAC3C;CACA,aAAKb,IAAL,cAAca,MAAd;CACA;;CACD,aAAO,IAAP;CACA;CA5BgB;;CAAA;CAAA,WAAX;;;;CCpBP;;;;;CAKA;;;;;CAKA;;;;;;;CAOA;;;CAGO,IAAMC,GAAG,GAAG;CAClB;;;;;;;CAOAC,EAAAA,MAAM,EAAE,gBAACf,IAAD,EAAOgB,KAAP,EAAcC,QAAd,EAA2B;CAClC;CACA,WAAO,IAAP;CACA,GAXiB;;CAalB;;;;;;CAMAC,EAAAA,MAAM,EAAE,gBAACC,GAAD,EAAMC,OAAN,EAAkB;CACzB;CACA;CACA,WAAO,EAAP;CACA;CAvBiB,CAAZ;CA0BP;;;;CAGO,IAAMC,IAAI;CAAA;CAAA;;CAAA,mCAKR,EALQ;;CAAA,mCAWR,IAXQ;CAAA;;CAAA;CAAA;;CAahB;;;CAbgB,6BAgBP;CACR,aAAO,IAAP;CACA;CAlBe;;CAAA;CAAA,aAAV;;CCjDP;;;;;;;CAYA;;;;KAGaC,SAAS,GAAG;CACxBC,EAAAA,IAAI,EAAE,8BADkB;CAExBC,EAAAA,OAAO,EAAE,OAFe;CAGxB7B,EAAAA,IAAI,EAAJA,IAHwB;CAIxBY,EAAAA,KAAK,EAALA,KAJwB;CAKxBc,EAAAA,IAAI,EAAJA,IALwB;CAMxBP,EAAAA,GAAG,EAAHA;CANwB;AASzB,yBAAeL,MAAM,CAACC,MAAP,CAAce,QAAd,EAAwB;CAAEH,EAAAA,SAAS,EAATA;CAAF,CAAxB,CAAf;;;;;;;;;;;;;"}